


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         
    3 00000000                 INCLUDE          nix_core_a_inner.h
    1 00000000                 EXTERN           gpstrCurTaskReg
    2 00000000                 EXTERN           gpstrNextTaskReg
    3 00000000         
    4 00000000                 EXTERN           NIX_TaskSched
    5 00000000         
    6 00000000                 EXPORT           NIX_PendSvContextSwitch
    7 00000000                 EXPORT           NIX_SwitchToTask
    8 00000000                 EXPORT           NIX_TaskOccurSwi
    9 00000000                 EXPORT           NIX_GetXpsr
   10 00000000         
   11 00000000                 END
    4 00000000         
    5 00000000         
    6 00000000         ;Õ»8×Ö½Ú¶ÔÆë
    7 00000000                 PRESERVE8
    8 00000000         
    9 00000000                 AREA             NIX_CORE_A, CODE, READONLY
   10 00000000                 THUMB
   11 00000000         
   12 00000000         
   13 00000000         ;º¯Êý¹¦ÄÜ: ÊµÏÖÈÎÎñÇÐ»»¹¦ÄÜ, ½«¼Ä´æÆ÷±¸·Ýµ½µ±Ç°ÈÎÎñÕ»ÖÐ,
                        ´Ó½«ÒªÔËÐÐÈÎÎñÕ»ÖÐÈ¡³ö
   14 00000000         ;          ¼Ä´æÆ÷±£´æÖµ²¢Ìø×ªµ½½«ÒªÔËÐÐÈÎÎñÖ´ÐÐ. ÓÉTickÖ
                       Ð¶Ï»òSVCÖÐ¶Ï´¥·¢PENDSV
   15 00000000         ;          ÖÐ¶Ï, ¸Ãº¯ÊýÎªPENDSVµÄÖÐ¶Ï·þÎñº¯Êý.
   16 00000000         ;Èë¿Ú²ÎÊý: none.
   17 00000000         ;·µ »Ø Öµ: none.
   18 00000000         NIX_PendSvContextSwitch
   19 00000000         
   20 00000000         ;±£´æ½Ó¿Ú¼Ä´æÆ÷
   21 00000000 B500            PUSH             {R14}
   22 00000002         
   23 00000002         ;µ÷ÓÃCÓïÑÔÈÎÎñµ÷¶Èº¯Êý
   24 00000002 4821            LDR              R0, =NIX_TaskSched 
                                                            ;º¯ÊýµØÖ·´æÈëR0
   25 00000004 F20F 0E03       ADR.W            R14, {PC} + 0x7 ;±£´æ·µ»ØµØÖ·
   26 00000008 4700            BX               R0          ;Ö´ÐÐNIX_TaskSchedº
                                                            ¯Êý
   27 0000000A         
   28 0000000A         ;±£´æµ±Ç°ÈÎÎñµÄÕ»ÐÅÏ¢
   29 0000000A 46EE            MOV              R14, R13    ;½«SP´æÈëLR
   30 0000000C 481F            LDR              R0, =gpstrCurTaskReg ;»ñÈ¡±äÁ¿g
                                                            pstrCurTaskRegµÄµØÖ
                                                            ·
   31 0000000E F8D0 C000       LDR              R12, [R0]   ;½«µ±Ç°ÈÎÎñ¼Ä´æÆ÷×é
                                                            µØÖ·´æÈëR12
   32 00000012 4660            MOV              R0, R12     ;½«R12µÄÖµ´æÈëR0
   33 00000014 B190            CBZ              R0, __BACKUP_REG ;R0ÈôÎª0ÔòÖ±½Ó
                                                            Ìø×ª£¬²»ÐèÒª±£´æµ±Ç
                                                            °ÈÎÎñÕ»ÐÅÏ¢
   34 00000016 F10E 0E04       ADD              R14, #0x4   ;LRÖ¸ÏòÕ»ÖÐ8¸ö¼Ä´æÆ
                                                            ÷ÖÐµÄR0
   35 0000001A E8BE 000F       LDMIA            R14!, {R0 - R3} ;È¡³öR0-R3ÊýÖµ
   36 0000001E E8AC 0FFF       STMIA            R12!, {R0 - R11} ;½«R0-R11±£´æµ
                                                            ½¼Ä´æÆ÷×éÖÐ
   37 00000022 E89E 000F       LDMIA            R14, {R0 - R3} ;È¡³öR12,LR,PCºÍ



ARM Macro Assembler    Page 2 


                                                            XPSRÖµ
   38 00000026 F1AE 0E10       SUB              R14, #0x10  ;LRÖ¸ÏòÕ»ÖÐ8¸ö¼Ä´æÆ
                                                            ÷ÖÐµÄR0
   39 0000002A F84C 0B04       STMIA            R12!, {R0}  ;½«R12±£´æµ½¼Ä´æÆ÷×
                                                            éÖÐ
   40 0000002E F84C EB04       STMIA            R12!, {R14} ;½«SP±£´æµ½¼Ä´æÆ÷×é
                                                            ÖÐ
   41 00000032 E8AC 000E       STMIA            R12!, {R1 - R3} ;½«LR,PCºÍXPSR±
                                                            £´æµ½¼Ä´æÆ÷×éÖÐ
   42 00000036 BC01            POP              {R0}        ;È¡³öÑ¹ÈëÕ»ÖÐµÄLR
   43 00000038 F8CC 0000       STMIA            R12, {R0}   ;½«LR±£´æµ½¼Ä´æÆ÷×é
                                                            ÖÐµÄExc_Rtn
   44 0000003C         
   45 0000003C         __BACKUP_REG
   46 0000003C         ;ÈÎÎñµ÷¶ÈÍê±Ï, »Ö¸´½«ÒªÔËÐÐÈÎÎñÏÖ³¡
   47 0000003C 4814            LDR              R0, =gpstrNextTaskReg ;»ñÈ¡±äÁ¿
                                                            gpstrNextTaskRegµÄµ
                                                            ØÖ·
   48 0000003E 6801            LDR              R1, [R0]    ;½«½«ÒªÔËÐÐÈÎÎñµÄ¼Ä
                                                            ´æÆ÷×éµØÖ·´æÈëR1
   49 00000040 F101 0110       ADD              R1, #0x10   ;R1Ö¸Ïò¼Ä´æÆ÷×éÖÐµÄ
                                                            R4
   50 00000044 E8B1 0FF0       LDMIA            R1!, {R4 - R11} ;»Ö¸´R4~R11ÊýÖµ
                                                            
   51 00000048 F101 0104       ADD              R1, #0x4    ;R1Ö¸Ïò¼Ä´æÆ÷×éÖÐµÄ
                                                            SP
   52 0000004C F8D1 D000       LDMIA            R1, {R13}   ;»Ö¸´SPÊýÖµ
   53 00000050 F101 0110       ADD              R1, #0x10   ;R1Ö¸Ïò¼Ä´æÆ÷×éÖÐµÄ
                                                            Exc_Rtn
   54 00000054 6808            LDMIA            R1, {R0}    ;È¡³ö¼Ä´æÆ÷×éÖÐµÄEx
                                                            c_RtnÊýÖµ
   55 00000056 4700            BX               R0          ;Ö´ÐÐ¼´½«ÔËÐÐµÄÈÎÎñ
                                                            
   56 00000058         
   57 00000058         
   58 00000058         ;º¯Êý¹¦ÄÜ: ÊµÏÖ´Ó·Ç²Ù×÷ÏµÍ³×´Ì¬ÇÐ»»µ½²Ù×÷ÏµÍ³×´Ì¬, ´ÓµÚÒ
                       »¸öÈÎÎñÕ»ÖÐÈ¡³ö¼Ä´æÆ÷³õ
   59 00000058         ;          Ê¼Öµ²¢Ìø×ªµ½¸ÃÈÎÎñÖ´ÐÐ. ¸Ãº¯ÊýÓÉ³ÌÐòÖ±½Óµ÷ÓÃ.
                       
   60 00000058         ;Èë¿Ú²ÎÊý: none.
   61 00000058         ;·µ »Ø Öµ: none.
   62 00000058         NIX_SwitchToTask
   63 00000058         
   64 00000058         ;»ñÈ¡½«ÒªÔËÐÐÈÎÎñµÄÖ¸Õë
   65 00000058 480D            LDR              R0, =gpstrNextTaskReg ;»ñÈ¡±äÁ¿
                                                            gpstrNextTaskRegµÄµ
                                                            ØÖ·
   66 0000005A F8D0 D000       LDR              R13, [R0]   ;½«½«ÒªÔËÐÐÈÎÎñµÄ¼Ä
                                                            ´æÆ÷×éµØÖ·´æÈëSP
   67 0000005E         
   68 0000005E         ;»ñÈ¡½«ÒªÔËÐÐÈÎÎñµÄÕ»ÐÅÏ¢²¢ÔËÐÐÐÂÈÎÎñ
   69 0000005E B010            ADD              R13, #0x40  ;SPÖ¸Ïò¼Ä´æÆ÷×éÖÐµÄ
                                                            XPSR
   70 00000060 BC01            POP              {R0}        ;È¡³ö¼Ä´æÆ÷×éÖÐµÄXP
                                                            SRÊýÖµ
   71 00000062 F380 8803       MSR              XPSR, R0    ;»Ö¸´XPSRÊýÖµ
   72 00000066 B082            SUB              R13, #0x8   ;SPÖ¸Ïò¼Ä´æÆ÷×éÖÐµÄ
                                                            PC
   73 00000068 9800            LDMIA            R13, {R0}   ;È¡³ö¼Ä´æÆ÷×éÖÐµÄPC



ARM Macro Assembler    Page 3 


                                                            ÊýÖµ
   74 0000006A B08F            SUB              R13, #0x3C  ;SPÖ¸Ïò¼Ä´æÆ÷×éÖÐµÄ
                                                            R0
   75 0000006C F84D 0C04       STMDB            R13, {R0}   ;½«PCÖµ´æÈë¼Ä´æÆ÷×é
                                                            ÖÐR0ÏÂÃæµÄÎ»ÖÃ
   76 00000070 E8BD 1FFF       POP              {R0 - R12}  ;»Ö¸´R0-R12ÊýÖµ
   77 00000074 B001            ADD              R13, #0x4   ;SPÖ¸Ïò¼Ä´æÆ÷×éÖÐµÄ
                                                            LR
   78 00000076 F85D EB04       POP              {LR}        ;»Ö¸´LRÊýÖµ
   79 0000007A B090            SUB              R13, #0x40  ;SPÖ¸Ïò¼Ä´æÆ÷×éÖÐXP
                                                            SRÏÂÃæµÄÎ»ÖÃ
   80 0000007C BD00            POP              {PC}        ;Ö´ÐÐ¼´½«ÔËÐÐµÄÈÎÎñ
                                                            
   81 0000007E         
   82 0000007E         
   83 0000007E         ;º¯Êý¹¦ÄÜ: ÓÉ³ÌÐòÖ±½Óµ÷ÓÃ, ´¥·¢SWIÈíÖÐ¶Ï.
   84 0000007E         ;Èë¿Ú²ÎÊý: ÈíÖÐ¶Ï·þÎñºÅ.
   85 0000007E         ;·µ »Ø Öµ: none.
   86 0000007E         NIX_TaskOccurSwi
   87 0000007E         
   88 0000007E DF00            SVC              #0          ;´¥·¢SWIÈíÖÐ¶Ï
   89 00000080 4770            BX               R14         ;º¯Êý·µ»Ø
   90 00000082         
   91 00000082         
   92 00000082         ;º¯Êý¹¦ÄÜ: »ñÈ¡XPSR¼Ä´æÆ÷µÄÊýÖµ.
   93 00000082         ;Èë¿Ú²ÎÊý: none.
   94 00000082         ;·µ »Ø Öµ: XPSR¼Ä´æÆ÷ÊýÖµ.
   95 00000082         NIX_GetXpsr
   96 00000082         
   97 00000082 F3EF 8003       MRS              R0, XPSR    ;»ñÈ¡XPSRÊýÖµ
   98 00000086 4770            BX               R14         ;º¯Êý·µ»Ø
   99 00000088         
  100 00000088         
  101 00000088                 ALIGN
  102 00000088         
  103 00000088                 END
              00000000 
              00000000 
              00000000 
Command Line: --debug --xref --cpu=Cortex-M3 --apcs=interwork --depend=..\outfi
le\nix_core_a.d -o..\outfile\nix_core_a.o -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\
CMSIS\Include -IC:\Keil\ARM\Inc\ST\STM32F10x --list=..\outfile\nix_core_a.lst .
.\nix\nix_core_a.asm



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

NIX_CORE_A 00000000

Symbol: NIX_CORE_A
   Definitions
      At line 9 in file ..\nix\nix_core_a.asm
   Uses
      None
Comment: NIX_CORE_A unused
NIX_GetXpsr 00000082

Symbol: NIX_GetXpsr
   Definitions
      At line 95 in file ..\nix\nix_core_a.asm
   Uses
      At line 9 in file ..\nix\nix_core_a_inner.h
Comment: NIX_GetXpsr used once
NIX_PendSvContextSwitch 00000000

Symbol: NIX_PendSvContextSwitch
   Definitions
      At line 18 in file ..\nix\nix_core_a.asm
   Uses
      At line 6 in file ..\nix\nix_core_a_inner.h
Comment: NIX_PendSvContextSwitch used once
NIX_SwitchToTask 00000058

Symbol: NIX_SwitchToTask
   Definitions
      At line 62 in file ..\nix\nix_core_a.asm
   Uses
      At line 7 in file ..\nix\nix_core_a_inner.h
Comment: NIX_SwitchToTask used once
NIX_TaskOccurSwi 0000007E

Symbol: NIX_TaskOccurSwi
   Definitions
      At line 86 in file ..\nix\nix_core_a.asm
   Uses
      At line 8 in file ..\nix\nix_core_a_inner.h
Comment: NIX_TaskOccurSwi used once
__BACKUP_REG 0000003C

Symbol: __BACKUP_REG
   Definitions
      At line 45 in file ..\nix\nix_core_a.asm
   Uses
      At line 33 in file ..\nix\nix_core_a.asm
Comment: __BACKUP_REG used once
6 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

NIX_TaskSched 00000000

Symbol: NIX_TaskSched
   Definitions
      At line 4 in file ..\nix\nix_core_a_inner.h
   Uses
      At line 24 in file ..\nix\nix_core_a.asm
Comment: NIX_TaskSched used once
gpstrCurTaskReg 00000000

Symbol: gpstrCurTaskReg
   Definitions
      At line 1 in file ..\nix\nix_core_a_inner.h
   Uses
      At line 30 in file ..\nix\nix_core_a.asm
Comment: gpstrCurTaskReg used once
gpstrNextTaskReg 00000000

Symbol: gpstrNextTaskReg
   Definitions
      At line 2 in file ..\nix\nix_core_a_inner.h
   Uses
      At line 47 in file ..\nix\nix_core_a.asm
      At line 65 in file ..\nix\nix_core_a.asm

3 symbols
341 symbols in table
